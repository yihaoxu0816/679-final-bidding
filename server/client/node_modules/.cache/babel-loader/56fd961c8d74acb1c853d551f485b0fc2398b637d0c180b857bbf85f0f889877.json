{"ast":null,"code":"import { deletePostsByUser } from \"./posts\";\nimport { handleGet, handlePost, handleDelete, handlePatch } from './api.js';\nconst API_URL = process.env.REACT_APP_API_URL || 'https://localhost:6790';\nconst USERS_ENDPOINT = `${API_URL}/users`;\n\n/**\n * Get a user by their ID.\n * @param {String} id - The ID of the user to get.\n * @returns {Promise<Object>} - The user object or undefined if not found.\n */\nconst getUserById = async id => {\n  const user = await handleGet(`${USERS_ENDPOINT}/${id}`);\n  return user;\n};\n\n/**\n * Get all users.\n * @returns {Promise<Object[]>} - An array of user objects.\n */\nconst getUsers = async () => {\n  const users = await handleGet(USERS_ENDPOINT);\n  return users;\n};\n\n/**\n * This function is used to create a new user.\n * @param {String} username - The username of the user to create.\n * @param {String} password - The password of the user to create.\n * @param {String} displayName - The display name of the user to create.\n * @returns {Promise<Object>} - The created user object.\n */\nconst createUser = async (username, password, displayName) => {\n  const userData = {\n    username,\n    password,\n    displayName\n  };\n  await handlePost(USERS_ENDPOINT, userData);\n  // Re-fetch all users to get the newly created one\n  const users = await getUsers();\n  // Return the most recently created user (last one in the array)\n  return users[users.length - 1];\n};\n\n/**\n * This function is used to update a user.\n * @param {String} id - The ID of the user to update.\n * @param {Object} updatedFields - The fields to update. \n *   Fields not included in the object will not be updated.\n * @returns {Promise<Object>} - The updated user object.\n * @throws {Error} - if user not found\n\n */\nconst updateUser = async (id, updatedFields) => {\n  await handlePatch(`${USERS_ENDPOINT}/${id}`, updatedFields);\n  // Re-fetch the user to get the updated version\n  return await getUserById(id);\n};\n\n/**\n * This function is used to delete a user.\n * @param {String} id - The ID of the user to delete.\n * @returns {Promise<void>} - A promise that resolves when the user is deleted.\n */\nconst deleteUser = async id => {\n  await deletePostsByUser(id);\n  await handleDelete(`${USERS_ENDPOINT}/${id}`);\n};\n\n/**\n * This function is used to validate a login.\n * @param {String} username - The username of the user to validate.\n * @param {String} password - The password of the user to validate.\n * @returns {Promise<Object>} - The user object with token.\n * @throws {Error} - If the user is not found or the password is incorrect.\n */\nconst validateLogin = async (username, password) => {\n  // Use the modified USERS_ENDPOINT that points to the backend\n  const API_URL = USERS_ENDPOINT.replace('/users', '');\n  const response = await handlePost(`${API_URL}/auth/login`, {\n    username,\n    password\n  });\n  return response;\n};\nexport { getUserById, getUsers, createUser, updateUser, deleteUser, validateLogin };","map":{"version":3,"names":["deletePostsByUser","handleGet","handlePost","handleDelete","handlePatch","API_URL","process","env","REACT_APP_API_URL","USERS_ENDPOINT","getUserById","id","user","getUsers","users","createUser","username","password","displayName","userData","length","updateUser","updatedFields","deleteUser","validateLogin","replace","response"],"sources":["/Users/andyxu/Desktop/fall2025/si679/proj-1-blogtastic-yihaoxu0816/client/src/data/users.js"],"sourcesContent":["import { deletePostsByUser } from \"./posts\";\nimport { handleGet, handlePost, handleDelete, handlePatch } from './api.js';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'https://localhost:6790';\nconst USERS_ENDPOINT = `${API_URL}/users`;\n\n/**\n * Get a user by their ID.\n * @param {String} id - The ID of the user to get.\n * @returns {Promise<Object>} - The user object or undefined if not found.\n */\nconst getUserById = async(id) => {\n  const user = await handleGet(`${USERS_ENDPOINT}/${id}`);\n  return user;\n};\n\n/**\n * Get all users.\n * @returns {Promise<Object[]>} - An array of user objects.\n */\nconst getUsers = async () => {\n  const users = await handleGet(USERS_ENDPOINT);\n  return users;\n};\n\n/**\n * This function is used to create a new user.\n * @param {String} username - The username of the user to create.\n * @param {String} password - The password of the user to create.\n * @param {String} displayName - The display name of the user to create.\n * @returns {Promise<Object>} - The created user object.\n */\nconst createUser = async (username, password, displayName) => {\n  const userData = {\n    username, \n    password,\n    displayName\n  };\n  await handlePost(USERS_ENDPOINT, userData);\n  // Re-fetch all users to get the newly created one\n  const users = await getUsers();\n  // Return the most recently created user (last one in the array)\n  return users[users.length - 1];\n};\n\n/**\n * This function is used to update a user.\n * @param {String} id - The ID of the user to update.\n * @param {Object} updatedFields - The fields to update. \n *   Fields not included in the object will not be updated.\n * @returns {Promise<Object>} - The updated user object.\n * @throws {Error} - if user not found\n\n */\nconst updateUser = async (id, updatedFields) => {\n  await handlePatch(`${USERS_ENDPOINT}/${id}`, updatedFields);\n  // Re-fetch the user to get the updated version\n  return await getUserById(id);\n};\n\n/**\n * This function is used to delete a user.\n * @param {String} id - The ID of the user to delete.\n * @returns {Promise<void>} - A promise that resolves when the user is deleted.\n */\nconst deleteUser = async (id) => {\n  await deletePostsByUser(id);\n  await handleDelete(`${USERS_ENDPOINT}/${id}`);\n};\n\n/**\n * This function is used to validate a login.\n * @param {String} username - The username of the user to validate.\n * @param {String} password - The password of the user to validate.\n * @returns {Promise<Object>} - The user object with token.\n * @throws {Error} - If the user is not found or the password is incorrect.\n */\nconst validateLogin = async (username, password) => {\n  // Use the modified USERS_ENDPOINT that points to the backend\n  const API_URL = USERS_ENDPOINT.replace('/users', '');\n  const response = await handlePost(`${API_URL}/auth/login`, { username, password });\n  return response;\n};\n\nexport {\n  getUserById,\n  getUsers,\n  createUser,\n  updateUser,\n  deleteUser,\n  validateLogin,\n};"],"mappings":"AAAA,SAASA,iBAAiB,QAAQ,SAAS;AAC3C,SAASC,SAAS,EAAEC,UAAU,EAAEC,YAAY,EAAEC,WAAW,QAAQ,UAAU;AAE3E,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,wBAAwB;AACzE,MAAMC,cAAc,GAAG,GAAGJ,OAAO,QAAQ;;AAEzC;AACA;AACA;AACA;AACA;AACA,MAAMK,WAAW,GAAG,MAAMC,EAAE,IAAK;EAC/B,MAAMC,IAAI,GAAG,MAAMX,SAAS,CAAC,GAAGQ,cAAc,IAAIE,EAAE,EAAE,CAAC;EACvD,OAAOC,IAAI;AACb,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAC3B,MAAMC,KAAK,GAAG,MAAMb,SAAS,CAACQ,cAAc,CAAC;EAC7C,OAAOK,KAAK;AACd,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,UAAU,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,QAAQ,EAAEC,WAAW,KAAK;EAC5D,MAAMC,QAAQ,GAAG;IACfH,QAAQ;IACRC,QAAQ;IACRC;EACF,CAAC;EACD,MAAMhB,UAAU,CAACO,cAAc,EAAEU,QAAQ,CAAC;EAC1C;EACA,MAAML,KAAK,GAAG,MAAMD,QAAQ,CAAC,CAAC;EAC9B;EACA,OAAOC,KAAK,CAACA,KAAK,CAACM,MAAM,GAAG,CAAC,CAAC;AAChC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,UAAU,GAAG,MAAAA,CAAOV,EAAE,EAAEW,aAAa,KAAK;EAC9C,MAAMlB,WAAW,CAAC,GAAGK,cAAc,IAAIE,EAAE,EAAE,EAAEW,aAAa,CAAC;EAC3D;EACA,OAAO,MAAMZ,WAAW,CAACC,EAAE,CAAC;AAC9B,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,MAAMY,UAAU,GAAG,MAAOZ,EAAE,IAAK;EAC/B,MAAMX,iBAAiB,CAACW,EAAE,CAAC;EAC3B,MAAMR,YAAY,CAAC,GAAGM,cAAc,IAAIE,EAAE,EAAE,CAAC;AAC/C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMa,aAAa,GAAG,MAAAA,CAAOR,QAAQ,EAAEC,QAAQ,KAAK;EAClD;EACA,MAAMZ,OAAO,GAAGI,cAAc,CAACgB,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;EACpD,MAAMC,QAAQ,GAAG,MAAMxB,UAAU,CAAC,GAAGG,OAAO,aAAa,EAAE;IAAEW,QAAQ;IAAEC;EAAS,CAAC,CAAC;EAClF,OAAOS,QAAQ;AACjB,CAAC;AAED,SACEhB,WAAW,EACXG,QAAQ,EACRE,UAAU,EACVM,UAAU,EACVE,UAAU,EACVC,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}