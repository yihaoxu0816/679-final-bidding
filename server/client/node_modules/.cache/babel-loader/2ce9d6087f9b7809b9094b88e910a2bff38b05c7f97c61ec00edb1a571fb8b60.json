{"ast":null,"code":"var _jsxFileName = \"/Users/andyxu/Desktop/fall2025/si679/679-final-bidding/client/src/pages/allRooms.js\",\n  _s = $RefreshSig$();\nimport { useNavigate } from \"react-router-dom\";\nimport { useEffect, useState, useContext } from \"react\";\nimport { getRoomsWithHostNames } from \"../data/rooms\";\nimport RoomCard from \"../components/RoomCard\";\nimport { SocketContext } from \"../App\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Home() {\n  _s();\n  const [rooms, setRooms] = useState([]);\n  const navigate = useNavigate();\n  const socket = useContext(SocketContext);\n  console.log('in Home, rooms:', rooms);\n  useEffect(() => {\n    const fetchRooms = async () => {\n      const rooms = await getRoomsWithHostNames(null);\n      console.log('in Home useEffect, rooms were fetched:', rooms);\n      setRooms(rooms);\n    };\n    fetchRooms();\n  }, []);\n\n  // Socket.io real-time updates\n  useEffect(() => {\n    if (!socket) return;\n    const handleUpdateRoom = (roomId, updatedFields) => {\n      console.log('Room update received:', roomId, updatedFields);\n      setRooms(prevRooms => prevRooms.map(room => room.id === roomId ? {\n        ...room,\n        ...updatedFields\n      } : room));\n    };\n    const handleAddRoom = room => {\n      console.log('New room added:', room);\n      // Fetch rooms again to get the room with host name\n      getRoomsWithHostNames(null).then(setRooms);\n    };\n    const handleDeleteRoom = roomId => {\n      console.log('Room deleted:', roomId);\n      setRooms(prevRooms => prevRooms.filter(room => room.id !== roomId));\n    };\n    const handleAddBid = bid => {\n      console.log('New bid received:', bid);\n      // Update the room's highest bid if this bid is higher\n      setRooms(prevRooms => prevRooms.map(room => {\n        if (room.id === bid.roomId && bid.amount > room.currentHighestBid) {\n          return {\n            ...room,\n            currentHighestBid: bid.amount,\n            currentHighestBidder: bid.userId\n          };\n        }\n        return room;\n      }));\n    };\n    socket.on('updateRoom', handleUpdateRoom);\n    socket.on('addRoom', handleAddRoom);\n    socket.on('deleteRoom', handleDeleteRoom);\n    socket.on('addBid', handleAddBid);\n    return () => {\n      socket.off('updateRoom', handleUpdateRoom);\n      socket.off('addRoom', handleAddRoom);\n      socket.off('deleteRoom', handleDeleteRoom);\n      socket.off('addBid', handleAddBid);\n    };\n  }, [socket]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"All Rooms\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rooms-grid\",\n      children: rooms.map(room => /*#__PURE__*/_jsxDEV(RoomCard, {\n        room: room,\n        onClick: () => navigate(`/rooms/${room.id}`)\n      }, room.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"DRPPh66cxKqUNxAX0T77uPjDEfg=\", false, function () {\n  return [useNavigate];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useNavigate","useEffect","useState","useContext","getRoomsWithHostNames","RoomCard","SocketContext","jsxDEV","_jsxDEV","Home","_s","rooms","setRooms","navigate","socket","console","log","fetchRooms","handleUpdateRoom","roomId","updatedFields","prevRooms","map","room","id","handleAddRoom","then","handleDeleteRoom","filter","handleAddBid","bid","amount","currentHighestBid","currentHighestBidder","userId","on","off","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","_c","$RefreshReg$"],"sources":["/Users/andyxu/Desktop/fall2025/si679/679-final-bidding/client/src/pages/allRooms.js"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\nimport { useEffect, useState, useContext } from \"react\";\n\nimport { getRoomsWithHostNames } from \"../data/rooms\";\nimport RoomCard from \"../components/RoomCard\";\nimport { SocketContext } from \"../App\";\n\nfunction Home() {\n  const [ rooms, setRooms ] = useState([]);\n  const navigate = useNavigate();\n  const socket = useContext(SocketContext);\n  console.log('in Home, rooms:', rooms);\n\n  useEffect(() => {\n    const fetchRooms = async () => {\n      const rooms = await getRoomsWithHostNames(null);\n      console.log('in Home useEffect, rooms were fetched:', rooms);\n      setRooms(rooms);\n    };\n    fetchRooms();\n  }, []);\n\n  // Socket.io real-time updates\n  useEffect(() => {\n    if (!socket) return;\n\n    const handleUpdateRoom = (roomId, updatedFields) => {\n      console.log('Room update received:', roomId, updatedFields);\n      setRooms(prevRooms => \n        prevRooms.map(room => \n          room.id === roomId ? { ...room, ...updatedFields } : room\n        )\n      );\n    };\n\n    const handleAddRoom = (room) => {\n      console.log('New room added:', room);\n      // Fetch rooms again to get the room with host name\n      getRoomsWithHostNames(null).then(setRooms);\n    };\n\n    const handleDeleteRoom = (roomId) => {\n      console.log('Room deleted:', roomId);\n      setRooms(prevRooms => prevRooms.filter(room => room.id !== roomId));\n    };\n\n    const handleAddBid = (bid) => {\n      console.log('New bid received:', bid);\n      // Update the room's highest bid if this bid is higher\n      setRooms(prevRooms => \n        prevRooms.map(room => {\n          if (room.id === bid.roomId && bid.amount > room.currentHighestBid) {\n            return {\n              ...room,\n              currentHighestBid: bid.amount,\n              currentHighestBidder: bid.userId\n            };\n          }\n          return room;\n        })\n      );\n    };\n\n    socket.on('updateRoom', handleUpdateRoom);\n    socket.on('addRoom', handleAddRoom);\n    socket.on('deleteRoom', handleDeleteRoom);\n    socket.on('addBid', handleAddBid);\n\n    return () => {\n      socket.off('updateRoom', handleUpdateRoom);\n      socket.off('addRoom', handleAddRoom);\n      socket.off('deleteRoom', handleDeleteRoom);\n      socket.off('addBid', handleAddBid);\n    };\n  }, [socket]);\n\n  return (\n    <div>\n      <h1>All Rooms</h1>\n      <div className=\"rooms-grid\">\n        {rooms.map((room) => (\n          <RoomCard \n            key={room.id} \n            room={room} \n            onClick={() => navigate(`/rooms/${room.id}`)}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}