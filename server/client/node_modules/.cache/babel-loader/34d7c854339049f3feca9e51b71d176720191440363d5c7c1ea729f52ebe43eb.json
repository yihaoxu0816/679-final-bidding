{"ast":null,"code":"import { getUsers } from './users.js';\n\n/**\n * This is a mock post collection.\n * It should be removed entirely when the backend is implemented.\n * \n * You should NOT use any local data structures to cache data\n * from the backend. All requests should go to the backend.\n */\nlet postCollection = [{\n  id: 'postId1',\n  title: 'First Post',\n  content: 'This is the first post',\n  authorId: 'authorId1',\n  createdAt: new Date().toISOString(),\n  updatedAt: new Date().toISOString()\n}, {\n  id: 'postid2',\n  title: 'Second Post',\n  content: 'This is the second post',\n  authorId: 'authorId2',\n  createdAt: new Date().toISOString(),\n  updatedAt: new Date().toISOString()\n}];\n\n/**\n * NOTE: You do not need to change this function! \n * If your implementations of getPosts() and getUsers()\n * are working, this function will work just fine.\n * \n * Get all posts with author names added (as opposed to just author ids)\n * @param {number} author (optional) - The author ID to filter posts by.\n * @returns {Promise<Object[]>} - An array of post objects with author names.\n */\nconst getPostsWithAuthorNames = async (authorId = null) => {\n  let posts = await getPosts(authorId);\n  let users = await getUsers();\n  return posts.map(post => {\n    var _user$displayName;\n    const user = users.find(user => user.id === post.authorId);\n    if (!user) {\n      throw new Error(`Post ${post.id} found with uknown author ${post.authorId}`);\n    }\n    return {\n      ...post,\n      authorName: (_user$displayName = user === null || user === void 0 ? void 0 : user.displayName) !== null && _user$displayName !== void 0 ? _user$displayName : 'Unknown Author'\n    };\n  });\n};\n\n/**\n * NOTE: You do not need to change this function! \n * If your implementations of getPost() and getUsers()\n * are working, this function will work just fine.\n * \n * Get a single post with author name added (as opposed to just author id)\n * @param {String} postId - The post to get.\n * @returns {Promise<Object>} - A post object with author name added.\n */\nconst getPostWithAuthorName = async postId => {\n  var _theAuthor$displayNam;\n  let users = await getUsers();\n  let thePost = await getPost(postId);\n  if (!thePost) {\n    throw new Error(`Post ${postId} not found.`);\n  }\n  let theAuthor = users.find(user => user.id === thePost.authorId);\n  if (!theAuthor) {\n    throw new Error(`Post ${thePost.id} has unknown author ${thePost.authorId}`);\n  }\n  thePost.authorName = (_theAuthor$displayNam = theAuthor === null || theAuthor === void 0 ? void 0 : theAuthor.displayName) !== null && _theAuthor$displayNam !== void 0 ? _theAuthor$displayNam : 'Unknown Author';\n  return thePost;\n};\n\n/**\n * NOTE: You do not need to change this function! \n * If your implementations of getPosts() and deletePost()\n * are working, this function will work just fine.\n * \n * Delete all posts by a user. Needed when a user is deleted.\n * @param {String} postId - The post to get.\n * @returns {Promise<Object>} - A post object with author name added.\n */\nconst deletePostsByUser = async userId => {\n  const postsByUser = await getPosts(userId);\n  postsByUser.forEach(async post => {\n    await deletePost(post.id);\n  });\n};\n\n/**\n * Get all posts.\n * If an author is provided, it will return only posts by that author.\n * @param {String} author (optional) - The author ID to filter posts by.\n * @returns {Promise<Object[]>} - An array of post objects.\n */\nconst getPosts = async (authorId = null) => {\n  if (authorId) {\n    return postCollection.filter(post => post.authorId === authorId);\n  }\n  return postCollection;\n};\n\n/**\n * Get a post by its ID.\n * @param {String} id - The ID of the post to get.\n * @returns {Promise<Object>} - The post object if found, undefined otherwise\n */\nconst getPost = async id => {\n  return postCollection.find(post => post.id === id);\n};\n\n/**\n * Create a new (blog) post.\n * @param {Object} postData - The post data to create.\n * @returns {Promise<Object>} - The created post object.\n */\nconst createPost = async postData => {\n  const id = new Date().getTime().toString();\n  const newPost = {\n    ...postData,\n    id: id,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString()\n  };\n  postCollection.push(newPost);\n  return newPost;\n};\n\n/**\n * Update a post.\n * @param {String} id - The ID of the post to update.\n * @param {Object} updatedFields - The fields to update.\n * @returns {Promise<Object>} - The updated post object.\n *   Fields not included in the object will not be updated.\n * @throws {Error} - if post not found\n */\nconst updatePost = async (id, updatedFields) => {\n  const thePost = postCollection.find(post => post.id === id);\n  if (!thePost) {\n    throw new Error(`Can't update post. Post with id ${id} not found.`);\n  }\n  const updatedPost = {\n    ...thePost,\n    ...updatedFields,\n    updatedAt: new Date().toISOString()\n  };\n  postCollection = postCollection.map(post => post.id === id ? updatedPost : post);\n  return updatedPost;\n};\n\n/**\n * Delete a post.\n * @param {String} id - The ID of the post to delete.\n * @returns {Promise<void>} - A promise that resolves when the post is deleted.\n */\nconst deletePost = async id => {\n  postCollection = postCollection.filter(post => post.id !== id);\n};\nexport { getPostsWithAuthorNames, getPostWithAuthorName, deletePostsByUser, getPosts, getPost, createPost, updatePost, deletePost };","map":{"version":3,"names":["getUsers","postCollection","id","title","content","authorId","createdAt","Date","toISOString","updatedAt","getPostsWithAuthorNames","posts","getPosts","users","map","post","_user$displayName","user","find","Error","authorName","displayName","getPostWithAuthorName","postId","_theAuthor$displayNam","thePost","getPost","theAuthor","deletePostsByUser","userId","postsByUser","forEach","deletePost","filter","createPost","postData","getTime","toString","newPost","push","updatePost","updatedFields","updatedPost"],"sources":["/Users/andyxu/Desktop/fall2025/si679/proj-1-blogtastic-yihaoxu0816/client/src/data/posts.js"],"sourcesContent":["import { getUsers } from './users.js';\n\n/**\n * This is a mock post collection.\n * It should be removed entirely when the backend is implemented.\n * \n * You should NOT use any local data structures to cache data\n * from the backend. All requests should go to the backend.\n */\nlet postCollection = [\n  {  \n    id: 'postId1',\n    title: 'First Post',\n    content: 'This is the first post',\n    authorId: 'authorId1',\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: 'postid2',\n    title: 'Second Post',\n    content: 'This is the second post',\n    authorId: 'authorId2',\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n];\n\n/**\n * NOTE: You do not need to change this function! \n * If your implementations of getPosts() and getUsers()\n * are working, this function will work just fine.\n * \n * Get all posts with author names added (as opposed to just author ids)\n * @param {number} author (optional) - The author ID to filter posts by.\n * @returns {Promise<Object[]>} - An array of post objects with author names.\n */\nconst getPostsWithAuthorNames = async (authorId = null) => {\n  let posts = await getPosts(authorId);\n  let users = await getUsers();\n\n  return posts.map((post) => {\n    const user = users.find((user) => user.id === post.authorId);\n    if (!user) {\n      throw new Error(`Post ${post.id} found with uknown author ${post.authorId}`);\n    }\n    return {\n      ...post,\n      authorName: user?.displayName ?? 'Unknown Author'\n    };\n  });\n};\n\n/**\n * NOTE: You do not need to change this function! \n * If your implementations of getPost() and getUsers()\n * are working, this function will work just fine.\n * \n * Get a single post with author name added (as opposed to just author id)\n * @param {String} postId - The post to get.\n * @returns {Promise<Object>} - A post object with author name added.\n */\nconst getPostWithAuthorName = async (postId) => {\n  let users = await getUsers();\n  let thePost = await getPost(postId);\n  \n  if (!thePost) {\n    throw new Error(`Post ${postId} not found.`);\n  }\n\n  let theAuthor = users.find(user => user.id === thePost.authorId);\n  if (!theAuthor) {\n    throw new Error(`Post ${thePost.id} has unknown author ${thePost.authorId}`);\n  }\n\n  thePost.authorName = theAuthor?.displayName ?? 'Unknown Author';\n  return thePost;\n}\n\n/**\n * NOTE: You do not need to change this function! \n * If your implementations of getPosts() and deletePost()\n * are working, this function will work just fine.\n * \n * Delete all posts by a user. Needed when a user is deleted.\n * @param {String} postId - The post to get.\n * @returns {Promise<Object>} - A post object with author name added.\n */\nconst deletePostsByUser = async (userId) => {\n  const postsByUser = await getPosts(userId);\n  postsByUser.forEach(async post => {\n    await deletePost(post.id);\n  })\n}\n\n/**\n * Get all posts.\n * If an author is provided, it will return only posts by that author.\n * @param {String} author (optional) - The author ID to filter posts by.\n * @returns {Promise<Object[]>} - An array of post objects.\n */\nconst getPosts = async (authorId = null) => {\n  if (authorId) {\n    return postCollection.filter((post) => post.authorId === authorId);\n  }\n  return postCollection;\n};\n\n/**\n * Get a post by its ID.\n * @param {String} id - The ID of the post to get.\n * @returns {Promise<Object>} - The post object if found, undefined otherwise\n */\nconst getPost = async (id) => {\n  return postCollection.find(post => post.id === id);\n};\n\n/**\n * Create a new (blog) post.\n * @param {Object} postData - The post data to create.\n * @returns {Promise<Object>} - The created post object.\n */\nconst createPost = async (postData) => {\n  const id = new Date().getTime().toString();\n  const newPost = {\n    ...postData,\n    id: id,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  };\n  postCollection.push(newPost)\n  return newPost;\n};\n\n/**\n * Update a post.\n * @param {String} id - The ID of the post to update.\n * @param {Object} updatedFields - The fields to update.\n * @returns {Promise<Object>} - The updated post object.\n *   Fields not included in the object will not be updated.\n * @throws {Error} - if post not found\n */\nconst updatePost = async(id, updatedFields) => {\n  const thePost = postCollection.find(post => post.id === id);\n  \n  if (!thePost) {\n    throw new Error(`Can't update post. Post with id ${id} not found.`);\n  }\n    \n  const updatedPost = {\n    ...thePost,\n    ...updatedFields,\n    updatedAt: new Date().toISOString(),\n  };\n  postCollection = postCollection.map(post => post.id === id ? updatedPost : post);\n  return updatedPost;\n};\n\n/**\n * Delete a post.\n * @param {String} id - The ID of the post to delete.\n * @returns {Promise<void>} - A promise that resolves when the post is deleted.\n */\nconst deletePost = async(id) => {\n  postCollection = postCollection.filter(post => post.id !== id);\n};\n\nexport { \n  getPostsWithAuthorNames,\n  getPostWithAuthorName,\n  deletePostsByUser,\n  getPosts, \n  getPost, \n  createPost, \n  updatePost, \n  deletePost, \n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}