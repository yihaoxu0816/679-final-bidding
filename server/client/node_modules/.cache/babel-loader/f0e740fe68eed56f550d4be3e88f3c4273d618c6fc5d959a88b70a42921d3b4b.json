{"ast":null,"code":"import { deletePostsByUser } from \"./posts\";\nimport { handleGet, handlePost, handleDelete, handlePatch } from './api.js';\n\n// Backend API URL - override the default from api.js\nconst API_URL = process.env.REACT_APP_API_URL || 'https://localhost:6790';\nconst USERS_ENDPOINT = `${API_URL}/users`;\nconst AUTH_ENDPOINT = `${API_URL}/auth`;\n\n/**\n * Get a user by their ID.\n * @param {String} id - The ID of the user to get.\n * @returns {Promise<Object>} - The user object or undefined if not found.\n */\nconst getUserById = async id => {\n  return await handleGet(`${USERS_ENDPOINT}/${id}`);\n};\n\n/**\n * Get all users.\n * @returns {Promise<Object[]>} - An array of user objects.\n */\nconst getUsers = async () => {\n  return userCollection;\n};\n\n/**\n * This function is used to create a new user.\n * @param {String} username - The username of the user to create.\n * @param {String} password - The password of the user to create.\n * @param {String} displayName - The display name of the user to create.\n * @returns {Promise<Object>} - The created user object.\n */\nconst createUser = async (username, password, displayName) => {\n  const id = new Date().getTime().toString();\n  const newUser = {\n    id,\n    username,\n    password,\n    displayName\n  };\n  userCollection.push(newUser);\n  return newUser;\n};\n\n/**\n * This function is used to update a user.\n * @param {String} id - The ID of the user to update.\n * @param {Object} updatedFields - The fields to update. \n *   Fields not included in the object will not be updated.\n * @returns {Promise<Object>} - The updated user object.\n * @throws {Error} - if user not found\n\n */\nconst updateUser = async (id, updatedFields) => {\n  const theUser = userCollection.find(user => user.id === id);\n  if (!theUser) {\n    throw new Error(`Can't update user. User with id ${id}not found`);\n  }\n  const updatedUser = {\n    ...theUser,\n    ...updatedFields\n  };\n  userCollection = userCollection.map(user => user.id === id ? updatedUser : user);\n  return updatedUser;\n};\n\n/**\n * This function is used to delete a user.\n * @param {String} id - The ID of the user to delete.\n * @returns {Promise<void>} - A promise that resolves when the user is deleted.\n */\nconst deleteUser = async id => {\n  userCollection = userCollection.filter(user => user.id !== id);\n  await deletePostsByUser(id);\n};\n\n/**\n * This function is used to validate a login.\n * @param {String} username - The username of the user to validate.\n * @param {String} password - The password of the user to validate.\n * @returns {Promise<Object>} - The user object.\n * @throws {Error} - If the user is not found or the password is incorrect.\n */\nconst validateLogin = async (username, password) => {\n  const user = userCollection.find(user => user.username === username);\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n  if (user.password !== password) {\n    throw new Error(\"Invalid password\");\n  }\n  return user;\n};\nexport { getUserById, getUsers, createUser, updateUser, deleteUser, validateLogin };","map":{"version":3,"names":["deletePostsByUser","handleGet","handlePost","handleDelete","handlePatch","API_URL","process","env","REACT_APP_API_URL","USERS_ENDPOINT","AUTH_ENDPOINT","getUserById","id","getUsers","userCollection","createUser","username","password","displayName","Date","getTime","toString","newUser","push","updateUser","updatedFields","theUser","find","user","Error","updatedUser","map","deleteUser","filter","validateLogin"],"sources":["/Users/andyxu/Desktop/fall2025/si679/proj-1-blogtastic-yihaoxu0816/client/src/data/users.js"],"sourcesContent":["import { deletePostsByUser } from \"./posts\";\nimport { handleGet, handlePost, handleDelete, handlePatch } from './api.js';\n\n// Backend API URL - override the default from api.js\nconst API_URL = process.env.REACT_APP_API_URL || 'https://localhost:6790';\nconst USERS_ENDPOINT = `${API_URL}/users`;\nconst AUTH_ENDPOINT = `${API_URL}/auth`;\n\n/**\n * Get a user by their ID.\n * @param {String} id - The ID of the user to get.\n * @returns {Promise<Object>} - The user object or undefined if not found.\n */\nconst getUserById = async(id) => {\n  return await handleGet(`${USERS_ENDPOINT}/${id}`);\n};\n\n/**\n * Get all users.\n * @returns {Promise<Object[]>} - An array of user objects.\n */\nconst getUsers = async () => {\n  return userCollection;\n};\n\n/**\n * This function is used to create a new user.\n * @param {String} username - The username of the user to create.\n * @param {String} password - The password of the user to create.\n * @param {String} displayName - The display name of the user to create.\n * @returns {Promise<Object>} - The created user object.\n */\nconst createUser = async (username, password, displayName) => {\n  const id = new Date().getTime().toString();\n  const newUser = {\n    id, \n    username, \n    password,\n    displayName\n  };\n  userCollection.push(newUser);\n  return newUser;\n};\n\n/**\n * This function is used to update a user.\n * @param {String} id - The ID of the user to update.\n * @param {Object} updatedFields - The fields to update. \n *   Fields not included in the object will not be updated.\n * @returns {Promise<Object>} - The updated user object.\n * @throws {Error} - if user not found\n\n */\nconst updateUser = async (id, updatedFields) => {\n  const theUser = userCollection.find(user => user.id === id);\n  if (!theUser) {\n    throw new Error(`Can't update user. User with id ${id}not found`);\n  }\n  const updatedUser = {\n    ...theUser, \n    ...updatedFields\n  }\n  userCollection = userCollection.map(user => user.id === id ? updatedUser : user);\n  return updatedUser;\n};\n\n/**\n * This function is used to delete a user.\n * @param {String} id - The ID of the user to delete.\n * @returns {Promise<void>} - A promise that resolves when the user is deleted.\n */\nconst deleteUser = async (id) => {\n  userCollection = userCollection.filter(user => user.id !== id);\n  await deletePostsByUser(id);\n};\n\n/**\n * This function is used to validate a login.\n * @param {String} username - The username of the user to validate.\n * @param {String} password - The password of the user to validate.\n * @returns {Promise<Object>} - The user object.\n * @throws {Error} - If the user is not found or the password is incorrect.\n */\nconst validateLogin = async (username, password) => {\n  const user = userCollection.find(user => user.username === username);\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n  if (user.password !== password) {\n    throw new Error(\"Invalid password\");\n  }\n  return user;\n};\n\nexport {\n  getUserById,\n  getUsers,\n  createUser,\n  updateUser,\n  deleteUser,\n  validateLogin,\n};"],"mappings":"AAAA,SAASA,iBAAiB,QAAQ,SAAS;AAC3C,SAASC,SAAS,EAAEC,UAAU,EAAEC,YAAY,EAAEC,WAAW,QAAQ,UAAU;;AAE3E;AACA,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,wBAAwB;AACzE,MAAMC,cAAc,GAAG,GAAGJ,OAAO,QAAQ;AACzC,MAAMK,aAAa,GAAG,GAAGL,OAAO,OAAO;;AAEvC;AACA;AACA;AACA;AACA;AACA,MAAMM,WAAW,GAAG,MAAMC,EAAE,IAAK;EAC/B,OAAO,MAAMX,SAAS,CAAC,GAAGQ,cAAc,IAAIG,EAAE,EAAE,CAAC;AACnD,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAC3B,OAAOC,cAAc;AACvB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,UAAU,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,QAAQ,EAAEC,WAAW,KAAK;EAC5D,MAAMN,EAAE,GAAG,IAAIO,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;EAC1C,MAAMC,OAAO,GAAG;IACdV,EAAE;IACFI,QAAQ;IACRC,QAAQ;IACRC;EACF,CAAC;EACDJ,cAAc,CAACS,IAAI,CAACD,OAAO,CAAC;EAC5B,OAAOA,OAAO;AAChB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAME,UAAU,GAAG,MAAAA,CAAOZ,EAAE,EAAEa,aAAa,KAAK;EAC9C,MAAMC,OAAO,GAAGZ,cAAc,CAACa,IAAI,CAACC,IAAI,IAAIA,IAAI,CAAChB,EAAE,KAAKA,EAAE,CAAC;EAC3D,IAAI,CAACc,OAAO,EAAE;IACZ,MAAM,IAAIG,KAAK,CAAC,mCAAmCjB,EAAE,WAAW,CAAC;EACnE;EACA,MAAMkB,WAAW,GAAG;IAClB,GAAGJ,OAAO;IACV,GAAGD;EACL,CAAC;EACDX,cAAc,GAAGA,cAAc,CAACiB,GAAG,CAACH,IAAI,IAAIA,IAAI,CAAChB,EAAE,KAAKA,EAAE,GAAGkB,WAAW,GAAGF,IAAI,CAAC;EAChF,OAAOE,WAAW;AACpB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,MAAME,UAAU,GAAG,MAAOpB,EAAE,IAAK;EAC/BE,cAAc,GAAGA,cAAc,CAACmB,MAAM,CAACL,IAAI,IAAIA,IAAI,CAAChB,EAAE,KAAKA,EAAE,CAAC;EAC9D,MAAMZ,iBAAiB,CAACY,EAAE,CAAC;AAC7B,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMsB,aAAa,GAAG,MAAAA,CAAOlB,QAAQ,EAAEC,QAAQ,KAAK;EAClD,MAAMW,IAAI,GAAGd,cAAc,CAACa,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACZ,QAAQ,KAAKA,QAAQ,CAAC;EACpE,IAAI,CAACY,IAAI,EAAE;IACT,MAAM,IAAIC,KAAK,CAAC,gBAAgB,CAAC;EACnC;EACA,IAAID,IAAI,CAACX,QAAQ,KAAKA,QAAQ,EAAE;IAC9B,MAAM,IAAIY,KAAK,CAAC,kBAAkB,CAAC;EACrC;EACA,OAAOD,IAAI;AACb,CAAC;AAED,SACEjB,WAAW,EACXE,QAAQ,EACRE,UAAU,EACVS,UAAU,EACVQ,UAAU,EACVE,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}