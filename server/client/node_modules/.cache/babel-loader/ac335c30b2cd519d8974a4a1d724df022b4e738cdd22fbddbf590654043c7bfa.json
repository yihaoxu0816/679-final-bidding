{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{getRoom,createRoom,updateRoom}from\"../data/rooms\";import{getCurrentUser}from\"../data/users\";import\"./CreateEditRoom.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CreateEditRoom(){const{id}=useParams();const navigate=useNavigate();const isEditMode=!!id;const[itemName,setItemName]=useState(\"\");const[itemDescription,setItemDescription]=useState(\"\");const[startingPrice,setStartingPrice]=useState(\"\");const[errorMessage,setErrorMessage]=useState(\"\");const[loading,setLoading]=useState(false);useEffect(()=>{// Check if user is logged in\nconst loggedInUser=getCurrentUser();if(!loggedInUser){navigate(\"/login\");return;}// If edit mode, fetch room data\nif(isEditMode){const fetchRoom=async()=>{setLoading(true);try{const roomData=await getRoom(id);setItemName(roomData.itemName);setItemDescription(roomData.itemDescription);setStartingPrice(roomData.startingPrice.toString());}catch(error){setErrorMessage(\"Failed to load room data.\");}finally{setLoading(false);}};fetchRoom();}},[id,isEditMode,navigate]);const handleSubmit=async e=>{e.preventDefault();setErrorMessage(\"\");// Validation\nif(!itemName.trim()){setErrorMessage(\"Item name is required.\");return;}if(!itemDescription.trim()){setErrorMessage(\"Item description is required.\");return;}const price=parseFloat(startingPrice);if(!price||price<=0){setErrorMessage(\"Starting price must be greater than 0.\");return;}try{setLoading(true);if(isEditMode){// Update existing room\nawait updateRoom(id,{itemName,itemDescription,startingPrice:price});}else{// Create new room\nawait createRoom({itemName,itemDescription,startingPrice:price});}// Navigate back to profile\nnavigate(\"/profile\");}catch(error){setErrorMessage(error.message||\"Failed to \".concat(isEditMode?'update':'create',\" room.\"));}finally{setLoading(false);}};const handleCancel=()=>{navigate(\"/profile\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"create-edit-room-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:isEditMode?\"Edit Room\":\"Create a New Room\"}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{className:\"room-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"itemName\",children:\"Item Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"itemName\",value:itemName,onChange:e=>setItemName(e.target.value),placeholder:\"e.g., Vintage Camera\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"itemDescription\",children:\"Item Description *\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"itemDescription\",value:itemDescription,onChange:e=>setItemDescription(e.target.value),placeholder:\"Describe your item in detail...\",rows:\"5\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"startingPrice\",children:\"Starting Price ($) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"startingPrice\",value:startingPrice,onChange:e=>setStartingPrice(e.target.value),placeholder:\"e.g., 50\",min:\"0\",step:\"0.01\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cancel-button\",onClick:handleCancel,disabled:loading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",disabled:loading,children:loading?\"Saving...\":isEditMode?\"Update Room\":\"Create Room\"})]})]})]});}export default CreateEditRoom;","map":{"version":3,"names":["useEffect","useState","useParams","useNavigate","getRoom","createRoom","updateRoom","getCurrentUser","jsx","_jsx","jsxs","_jsxs","CreateEditRoom","id","navigate","isEditMode","itemName","setItemName","itemDescription","setItemDescription","startingPrice","setStartingPrice","errorMessage","setErrorMessage","loading","setLoading","loggedInUser","fetchRoom","roomData","toString","error","handleSubmit","e","preventDefault","trim","price","parseFloat","message","concat","handleCancel","className","children","onSubmit","htmlFor","type","value","onChange","target","placeholder","required","rows","min","step","onClick","disabled"],"sources":["/Users/andyxu/Desktop/fall2025/si679/679-final-bidding/server/client/src/pages/CreateEditRoom.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { getRoom, createRoom, updateRoom } from \"../data/rooms\";\nimport { getCurrentUser } from \"../data/users\";\nimport \"./CreateEditRoom.css\";\n\nfunction CreateEditRoom() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const isEditMode = !!id;\n\n  const [itemName, setItemName] = useState(\"\");\n  const [itemDescription, setItemDescription] = useState(\"\");\n  const [startingPrice, setStartingPrice] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    // Check if user is logged in\n    const loggedInUser = getCurrentUser();\n    if (!loggedInUser) {\n      navigate(\"/login\");\n      return;\n    }\n\n    // If edit mode, fetch room data\n    if (isEditMode) {\n      const fetchRoom = async () => {\n        setLoading(true);\n        try {\n          const roomData = await getRoom(id);\n          setItemName(roomData.itemName);\n          setItemDescription(roomData.itemDescription);\n          setStartingPrice(roomData.startingPrice.toString());\n        } catch (error) {\n          setErrorMessage(\"Failed to load room data.\");\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchRoom();\n    }\n  }, [id, isEditMode, navigate]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setErrorMessage(\"\");\n\n    // Validation\n    if (!itemName.trim()) {\n      setErrorMessage(\"Item name is required.\");\n      return;\n    }\n    if (!itemDescription.trim()) {\n      setErrorMessage(\"Item description is required.\");\n      return;\n    }\n    const price = parseFloat(startingPrice);\n    if (!price || price <= 0) {\n      setErrorMessage(\"Starting price must be greater than 0.\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      if (isEditMode) {\n        // Update existing room\n        await updateRoom(id, {\n          itemName,\n          itemDescription,\n          startingPrice: price\n        });\n      } else {\n        // Create new room\n        await createRoom({\n          itemName,\n          itemDescription,\n          startingPrice: price\n        });\n      }\n\n      // Navigate back to profile\n      navigate(\"/profile\");\n    } catch (error) {\n      setErrorMessage(error.message || `Failed to ${isEditMode ? 'update' : 'create'} room.`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancel = () => {\n    navigate(\"/profile\");\n  };\n\n  return (\n    <div className=\"create-edit-room-container\">\n      <h1>{isEditMode ? \"Edit Room\" : \"Create a New Room\"}</h1>\n\n      {errorMessage && <p className=\"error-message\">{errorMessage}</p>}\n\n      <form className=\"room-form\" onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"itemName\">Item Name *</label>\n          <input\n            type=\"text\"\n            id=\"itemName\"\n            value={itemName}\n            onChange={(e) => setItemName(e.target.value)}\n            placeholder=\"e.g., Vintage Camera\"\n            required\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"itemDescription\">Item Description *</label>\n          <textarea\n            id=\"itemDescription\"\n            value={itemDescription}\n            onChange={(e) => setItemDescription(e.target.value)}\n            placeholder=\"Describe your item in detail...\"\n            rows=\"5\"\n            required\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"startingPrice\">Starting Price ($) *</label>\n          <input\n            type=\"number\"\n            id=\"startingPrice\"\n            value={startingPrice}\n            onChange={(e) => setStartingPrice(e.target.value)}\n            placeholder=\"e.g., 50\"\n            min=\"0\"\n            step=\"0.01\"\n            required\n          />\n        </div>\n\n        <div className=\"form-actions\">\n          <button\n            type=\"button\"\n            className=\"cancel-button\"\n            onClick={handleCancel}\n            disabled={loading}\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            className=\"submit-button\"\n            disabled={loading}\n          >\n            {loading ? \"Saving...\" : (isEditMode ? \"Update Room\" : \"Create Room\")}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default CreateEditRoom;\n\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,OAAO,CAAEC,UAAU,CAAEC,UAAU,KAAQ,eAAe,CAC/D,OAASC,cAAc,KAAQ,eAAe,CAC9C,MAAO,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9B,QAAS,CAAAC,cAAcA,CAAA,CAAG,CACxB,KAAM,CAAEC,EAAG,CAAC,CAAGX,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAY,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAY,UAAU,CAAG,CAAC,CAACF,EAAE,CAEvB,KAAM,CAACG,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACiB,eAAe,CAAEC,kBAAkB,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAACmB,aAAa,CAAEC,gBAAgB,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACqB,YAAY,CAAEC,eAAe,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACuB,OAAO,CAAEC,UAAU,CAAC,CAAGxB,QAAQ,CAAC,KAAK,CAAC,CAE7CD,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAA0B,YAAY,CAAGnB,cAAc,CAAC,CAAC,CACrC,GAAI,CAACmB,YAAY,CAAE,CACjBZ,QAAQ,CAAC,QAAQ,CAAC,CAClB,OACF,CAEA;AACA,GAAIC,UAAU,CAAE,CACd,KAAM,CAAAY,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5BF,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAxB,OAAO,CAACS,EAAE,CAAC,CAClCI,WAAW,CAACW,QAAQ,CAACZ,QAAQ,CAAC,CAC9BG,kBAAkB,CAACS,QAAQ,CAACV,eAAe,CAAC,CAC5CG,gBAAgB,CAACO,QAAQ,CAACR,aAAa,CAACS,QAAQ,CAAC,CAAC,CAAC,CACrD,CAAE,MAAOC,KAAK,CAAE,CACdP,eAAe,CAAC,2BAA2B,CAAC,CAC9C,CAAC,OAAS,CACRE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CACDE,SAAS,CAAC,CAAC,CACb,CACF,CAAC,CAAE,CAACd,EAAE,CAAEE,UAAU,CAAED,QAAQ,CAAC,CAAC,CAE9B,KAAM,CAAAiB,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBV,eAAe,CAAC,EAAE,CAAC,CAEnB;AACA,GAAI,CAACP,QAAQ,CAACkB,IAAI,CAAC,CAAC,CAAE,CACpBX,eAAe,CAAC,wBAAwB,CAAC,CACzC,OACF,CACA,GAAI,CAACL,eAAe,CAACgB,IAAI,CAAC,CAAC,CAAE,CAC3BX,eAAe,CAAC,+BAA+B,CAAC,CAChD,OACF,CACA,KAAM,CAAAY,KAAK,CAAGC,UAAU,CAAChB,aAAa,CAAC,CACvC,GAAI,CAACe,KAAK,EAAIA,KAAK,EAAI,CAAC,CAAE,CACxBZ,eAAe,CAAC,wCAAwC,CAAC,CACzD,OACF,CAEA,GAAI,CACFE,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAIV,UAAU,CAAE,CACd;AACA,KAAM,CAAAT,UAAU,CAACO,EAAE,CAAE,CACnBG,QAAQ,CACRE,eAAe,CACfE,aAAa,CAAEe,KACjB,CAAC,CAAC,CACJ,CAAC,IAAM,CACL;AACA,KAAM,CAAA9B,UAAU,CAAC,CACfW,QAAQ,CACRE,eAAe,CACfE,aAAa,CAAEe,KACjB,CAAC,CAAC,CACJ,CAEA;AACArB,QAAQ,CAAC,UAAU,CAAC,CACtB,CAAE,MAAOgB,KAAK,CAAE,CACdP,eAAe,CAACO,KAAK,CAACO,OAAO,eAAAC,MAAA,CAAiBvB,UAAU,CAAG,QAAQ,CAAG,QAAQ,UAAQ,CAAC,CACzF,CAAC,OAAS,CACRU,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAc,YAAY,CAAGA,CAAA,GAAM,CACzBzB,QAAQ,CAAC,UAAU,CAAC,CACtB,CAAC,CAED,mBACEH,KAAA,QAAK6B,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzChC,IAAA,OAAAgC,QAAA,CAAK1B,UAAU,CAAG,WAAW,CAAG,mBAAmB,CAAK,CAAC,CAExDO,YAAY,eAAIb,IAAA,MAAG+B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEnB,YAAY,CAAI,CAAC,cAEhEX,KAAA,SAAM6B,SAAS,CAAC,WAAW,CAACE,QAAQ,CAAEX,YAAa,CAAAU,QAAA,eACjD9B,KAAA,QAAK6B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBhC,IAAA,UAAOkC,OAAO,CAAC,UAAU,CAAAF,QAAA,CAAC,aAAW,CAAO,CAAC,cAC7ChC,IAAA,UACEmC,IAAI,CAAC,MAAM,CACX/B,EAAE,CAAC,UAAU,CACbgC,KAAK,CAAE7B,QAAS,CAChB8B,QAAQ,CAAGd,CAAC,EAAKf,WAAW,CAACe,CAAC,CAACe,MAAM,CAACF,KAAK,CAAE,CAC7CG,WAAW,CAAC,sBAAsB,CAClCC,QAAQ,MACT,CAAC,EACC,CAAC,cAENtC,KAAA,QAAK6B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBhC,IAAA,UAAOkC,OAAO,CAAC,iBAAiB,CAAAF,QAAA,CAAC,oBAAkB,CAAO,CAAC,cAC3DhC,IAAA,aACEI,EAAE,CAAC,iBAAiB,CACpBgC,KAAK,CAAE3B,eAAgB,CACvB4B,QAAQ,CAAGd,CAAC,EAAKb,kBAAkB,CAACa,CAAC,CAACe,MAAM,CAACF,KAAK,CAAE,CACpDG,WAAW,CAAC,iCAAiC,CAC7CE,IAAI,CAAC,GAAG,CACRD,QAAQ,MACT,CAAC,EACC,CAAC,cAENtC,KAAA,QAAK6B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBhC,IAAA,UAAOkC,OAAO,CAAC,eAAe,CAAAF,QAAA,CAAC,sBAAoB,CAAO,CAAC,cAC3DhC,IAAA,UACEmC,IAAI,CAAC,QAAQ,CACb/B,EAAE,CAAC,eAAe,CAClBgC,KAAK,CAAEzB,aAAc,CACrB0B,QAAQ,CAAGd,CAAC,EAAKX,gBAAgB,CAACW,CAAC,CAACe,MAAM,CAACF,KAAK,CAAE,CAClDG,WAAW,CAAC,UAAU,CACtBG,GAAG,CAAC,GAAG,CACPC,IAAI,CAAC,MAAM,CACXH,QAAQ,MACT,CAAC,EACC,CAAC,cAENtC,KAAA,QAAK6B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BhC,IAAA,WACEmC,IAAI,CAAC,QAAQ,CACbJ,SAAS,CAAC,eAAe,CACzBa,OAAO,CAAEd,YAAa,CACtBe,QAAQ,CAAE9B,OAAQ,CAAAiB,QAAA,CACnB,QAED,CAAQ,CAAC,cACThC,IAAA,WACEmC,IAAI,CAAC,QAAQ,CACbJ,SAAS,CAAC,eAAe,CACzBc,QAAQ,CAAE9B,OAAQ,CAAAiB,QAAA,CAEjBjB,OAAO,CAAG,WAAW,CAAIT,UAAU,CAAG,aAAa,CAAG,aAAc,CAC/D,CAAC,EACN,CAAC,EACF,CAAC,EACJ,CAAC,CAEV,CAEA,cAAe,CAAAH,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}